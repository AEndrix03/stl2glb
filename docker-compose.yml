version: "3.9"

services:
  stl2glb:
    build: .
    ports:
      - "9002:${STL2GLB_PORT}"
    env_file:
      - .env
    volumes:
      - ./:/project
    working_dir: /project/build
    command: >
      bash -c "
      mkdir -p /project/build &&
      cd /project/build &&
      cmake .. -DCMAKE_BUILD_TYPE=Debug -DCMAKE_TOOLCHAIN_FILE=/project/external/vcpkg/scripts/buildsystems/vcpkg.cmake -G Ninja &&
      cmake --build . &&
      ./stl2glb
      "
